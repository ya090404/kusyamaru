let tapCount = 0;
let canTap = true;

const punchImages = ['right.png', 'left.png'];
const crackImages = ['crack1.png', 'crack2.png', 'crack3.png'];

document.getElementById('punchButton').addEventListener('click', () => {
  if (!canTap) return;
  tapCount++;

  if (tapCount >= 1 && tapCount <= 10) {
    document.getElementById('mainImage').src = punchImages[(tapCount - 1) % 2];
    new Audio('punch.mp3').play();
  }

  else if (tapCount === 11) {
    document.getElementById('overlayImage').src = crackImages[0];
    document.getElementById('overlayImage').style.display = 'block';
    new Audio('punch.mp3').play();
  }

  else if (tapCount >= 12 && tapCount <= 21) {
    document.getElementById('mainImage').src = punchImages[(tapCount - 12) % 2];
    new Audio('punch.mp3').play();
  }

  else if (tapCount === 22) {
    document.getElementById('overlayImage').src = crackImages[1];
    document.getElementById('overlayImage').style.display = 'block';
    new Audio('punch.mp3').play();
  }

  else if (tapCount >= 23 && tapCount <= 32) {
    document.getElementById('mainImage').src = punchImages[(tapCount - 23) % 2];
    new Audio('punch.mp3').play();
  }

  else if (tapCount === 33) {
    document.getElementById('overlayImage').src = crackImages[2];
    document.getElementById('overlayImage').style.display = 'block';
    new Audio('punch.mp3').play();
  }

  else if (tapCount === 34) {
    canTap = false; // 一時操作禁止
    document.getElementById('mainImage').src = 'explosion.png';
    const explosionSE = new Audio('explosion.mp3');
    explosionSE.play();
    explosionSE.onended = () => {
      setTimeout(() => {
        canTap = true; // 2秒後にタップ再開
      }, 2000);
    };
  }

  else if (tapCount === 35) {
    document.getElementById('mainImage').src = 'sukkiri.png';
    new Audio('sukkiri.mp3').play();
  }
});